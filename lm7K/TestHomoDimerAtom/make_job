#!/usr/bin/env python
# generate $work/jobque files to run. All related files are generated.
import string,sys,os,commands
arg=' '.join(sys.argv)
cwdroot=os.getcwd()

if '--copy' in sys.argv:
  os.system(ccc)
  ccc='cp savedata pldimer1 plmol.py ~/bin'
  sys.exit()

if '--pjsub' in sys.argv:
  work="TEST.pjsub"
elif '--bg' in sys.argv:
  work="TEST.bg"
else:
  print """\
  Main program of job script and ctrl file generator
  usage: To copy savedata pldimer1 plmol.py to your ~/bin. Do make_job --copy (these are utilities for data analysis).

         make_job (required --bg or --pjsub): (optional --continue --nrel)
           For given jobdimerlist, you can obtain TEST.bg/ TEST.bg.atom/ and so on,
         jobque file is the main script. You need to edit jobdimerlist to specify dimers/atoms to calculate.
 """
  sys.exit()
if '--nrel' in sys.argv:
  work=work+'.nrel'
if not os.path.exists(work): os.mkdir(work)

#---
ccc='cp jobdimerlist atomlist.bash extra.bash homodimerdistance.bash '+work
os.system(ccc)

#--- dimer section
os.chdir(work)
if os.path.exists("jobque"): os.rename("jobque", "jobque.bk")
os.system('../jobquescript.py jobdimerlist '+' '.join(sys.argv))
os.system("chmod +x jobmol*")

#----- atom section.
os.chdir('..')
work= work+'.atom'
if not os.path.exists(work): os.mkdir(work)
ccc='cp jobdimerlist atomlist.bash extra.bash homodimerdistance.bash '+work
os.system(ccc)
os.chdir(work)
if os.path.exists("jobque"): os.rename("jobque", "jobque.bk")
os.system('../jobquescript.py jobdimerlist --atom '+' '.join(sys.argv))
os.system('chmod +x jobatom*')
